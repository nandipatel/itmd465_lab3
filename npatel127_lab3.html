<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sales Tax Calculator</title>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
    <header>
        <div>
            <h3>ITMD-465 Lab 1 - Nandi Patel - npatel127@hawk.iit.edu</h3>
            <h1>Sales Tax Calculator</h1>
        </div>
    </header>

    <div class="cal_box">
        <p>Enter Subtotal and Tax Rate and click the Calculate button to show the sales 
            tax amount and the total. Click the clear button to clear out all form fields.
            Tax rate should be a percentage but do not enter a % sign in the tax rate box.
        </p>

        <div id="fields">
            <form id="myForm">
                <label for="subtotal">Subtotal:</label>
                <input type="text" id="subtotal" name="subtotal">

                <label for="tax_rate">Tax Rate (%):</label>
                <input type="text" id="tax_rate" name="tax_rate">

                <label for="sales_tax">Sales Tax:</label>
                <input type="text" id="sales_tax" name="sales_tax" disabled>

                <label for="total">Total:</label>
                <input type="text" id="total" name="total" disabled>

                <div id="buttons">
                    <button type="button" id="b1">Calculate Tax and Total</button>
                    <button type="reset" id="b2">Clear</button>
                </div>
            </form>
        </div>
    </div>

    <img src="sales.png" alt="sales image">
    <footer>
        &copy; 2021 Nandi Patel | npatel127@hawk.iit.edu
    </footer>

    <script>
        function init(){
            document.addEventListener('DOMContentLoaded', init);
            document.getElementsByClassName("cal_box").addEventListener("load");
            document.getElementById("b1").addEventListener("click", calFunc);
            document.getElementById("b2").addEventListener("click", clearFunc);
        }

        // EVENT HANDLER FOR CALCULATE
        document.getElementById("b1").addEventListener("click", calFunc);
        function calFunc() {
            //grabbing input
            st = document.getElementById("subtotal").value;
            tr = document.getElementById("tax_rate").value;
            //changing string to float
            var sub_total = parseFloat(st);
            var tax_rate = parseFloat(tr)
            
            //validation & calculation 
            if (sub_total > 0 && tax_rate > 0 && tax_rate <= 20){
                rate = tax_rate/100;
                document.getElementById("sales_tax").value = rate * sub_total;
                total = sub_total + (rate * sub_total)
                document.getElementById("total").value = (total.toFixed(2));
            }
            else if(sub_total < 0){
                alert("Subtotal must be a positive number!")
            }
            else{
                alert(" Tax rate is not within 0 and 20!")
            }
        }

        // EVENT HANDLER FOR CLEAR
        document.getElementById("b2").addEventListener("click", clearFunc);
        function clearFunc() {
                document.getElementById("myForm").reset();
                document.getElementById("subtotal").focus();
        }
        
    </script>
        
</body>
</html>

